# 天気に応じた服装提案アプリ

現在地の天気情報を取得し、気温・湿度・風速・天気に基づいて包括的な服装提案を行うWebアプリケーションです。

## 🌟 特徴

### 🎯 **詳細な服装提案システム**
- **カテゴリ別提案**: 基本アイテム、アウター、履物、アクセサリー・小物に分類
- **複合条件対応**: 気温・湿度・風速・天気を総合的に考慮
- **7段階の気温別ロジック**: 30℃以上〜5℃未満まで細分化された提案
- **天気別調整**: 雨・雪・晴れに応じた追加アイテムの提案
- **環境条件対応**: 高湿度・乾燥・強風時の専用アドバイス
- **時間帯別提案**: 朝（6-12時）・昼（12-18時）・夜（18-24時）の3時間帯での詳細な服装アドバイス
- **降水確率表示**: 現在天気と各時間帯の降水確率（☔ XX%）を表示し、雨対策アドバイスを提供
- **統合降水確率**: 現在地・都市検索問わず、メイン天気表示と時間帯別予報の両方で降水確率を確認可能

### 🔍 **多様な検索オプション**
- **位置情報取得**: ブラウザのGeolocation APIによる現在地天気取得
- **都市名検索**: 位置情報が利用できない場合の代替手段
- **県名・市区町村検索**: 「埼玉県」「杉並区」「川崎市」など柔軟な日本語検索対応
- **英語検索対応**: 「Tokyo」「Osaka」「Shibuya」等の英語都市名検索
- **検索パターン最適化**: 複数の検索パターンを自動生成して成功率を向上
- **詳細なエラーハンドリング**: 位置情報エラーの原因別対処方法を表示
- **HTTPS/セキュリティ対応**: 位置情報利用時の適切な警告表示

### 🎨 **美しいユーザーインターフェース**
- **Atomic Design採用**: コンポーネントベースの設計（Atoms/Molecules/Organisms/Templates）
- **Chakra UI v2**: モダンで統一されたデザインシステム
- **レスポンシブ対応**: デスクトップ・モバイル両方に最適化
- **コンパクト表示**: 時間帯別情報をスクロール不要で一画面表示
- **視覚的フィードバック**: カテゴリごとの色分けされた情報表示
- **アニメーション**: ホバー効果とスムーズなトランジション
- **アイコン統合**: react-iconsを使用した直感的なビジュアル（天気アイコンは適切なサイズに最適化）
- **直感的ナビゲーション**: トップページ復帰機能とワンクリック更新

### 📱 **技術的特徴**
- **Next.js 15 App Router**: 最新のReactフレームワーク
- **TypeScript**: 型安全性とコード品質の保証
- **カスタムフック**: useWeatherLogicで天気ロジックを分離・再利用可能
- **位置情報API**: ブラウザの位置情報を活用
- **OpenWeatherMap API**: 現在の天気と5日間予報を統合取得
- **地名変換システム**: 英語→日本語の自動変換（東京都杉並区、埼玉県○○市など）
- **検索パターン生成**: 200+都市の包括的な検索パターン自動生成
- **降水確率統合**: 予報データから現在時刻に最も近い降水確率を自動取得・表示

## 📋 詳細な服装提案ロジック

### 🌡️ **気温別基本提案**
| 気温範囲 | 基本アイテム | アウター | 履物 | アクセサリー |
|---------|-------------|----------|------|------------|
| 30℃以上 | 半袖Tシャツ、ショートパンツ | - | サンダル、スニーカー | 帽子、サングラス |
| 25-29℃ | 半袖Tシャツ、薄手パンツ | - | スニーカー、パンプス | キャップ |
| 20-24℃ | 長袖シャツ、カットソー | カーディガン | スニーカー、ローファー | - |
| 15-19℃ | 長袖シャツ、薄手セーター | ジャケット、トレンチコート | 革靴、ブーツ | - |
| 10-14℃ | 厚手シャツ、セーター、ニット | コート、厚手ジャケット | ブーツ、革靴 | マフラー |
| 5-9℃ | 厚手セーター、タートルネック | 冬用コート | ブーツ、防寒靴 | マフラー、手袋、ニット帽 |
| 5℃未満 | 厚手インナー、セーター | ダウンジャケット | 防寒ブーツ | 厚手マフラー、手袋、ニット帽 |

### 🌦️ **天気別追加提案**
- **☀️ 晴れ（20℃以上）**: 日焼け止め、サングラス
- **🌧️ 雨**: 傘、レインハット、防水シューズ、レインコート
- **❄️ 雪**: 防雪ブーツ、滑り止め、追加防寒具
- **☔ 降水確率30%以上**: 折りたたみ傘の携帯推奨
- **☔ 降水確率60%以上**: レインコート追加推奨

### 💨 **環境条件別調整**
- **高湿度（70%以上）**: 通気性重視、汗対策アドバイス
- **低湿度（30%以下）**: 保湿対策、マスク推奨
- **強風（20km/h以上）**: ウィンドブレーカー、帽子注意喚起
- **やや風強（10-19km/h）**: 軽い羽織りもの推奨

## 🛠️ 使用技術

### **フロントエンド**
- **Next.js 15**: App Router使用
- **React 19**: 最新のReactライブラリ
- **TypeScript**: 型安全なコード
- **Chakra UI v2**: モダンUIライブラリ
- **Framer Motion**: スムーズなアニメーション

### **外部API・サービス**
- **OpenWeatherMap API**: リアルタイム天気情報 + 5日間予報（3時間間隔）
- **Geolocation API**: ブラウザ位置情報
- **react-icons**: 豊富なアイコンライブラリ（BsCloudRain等の天気アイコン含む）

### **開発・ビルド**
- **Turbopack**: 高速ビルドシステム
- **ESLint**: コード品質管理
- **npm**: パッケージマネージャー

## 🚀 セットアップ

### 1. プロジェクトのクローン・セットアップ
```bash
git clone <repository-url>
cd weather_cloth
npm install
```

### 2. OpenWeatherMap APIキーの設定
1. [OpenWeatherMap](https://openweathermap.org/api)で無料アカウントを作成
2. APIキーを取得
3. 環境変数ファイルをセットアップ:
   ```bash
   cp .env.example .env.local
   ```
4. `.env.local`ファイルでAPIキーを設定:
   ```bash
   NEXT_PUBLIC_OPENWEATHER_API_KEY=your_actual_api_key_here
   ```

### 3. 開発サーバーの起動
```bash
npm run dev
```

### 4. アプリケーションにアクセス
ブラウザで http://localhost:3000 にアクセス

## 📱 使用方法

### 🎯 **現在地で天気を取得する場合**
1. **「現在地の天気を取得」ボタンをクリック**
2. **位置情報の許可**をブラウザで承認
3. **天気情報の自動取得**と表示

### 🔍 **都市名で検索する場合**
1. **都市名検索フィールドに入力**（例：Tokyo, 東京, 大阪）
2. **「検索」ボタンをクリック**またはEnterキーを押下
3. **天気情報の取得**と表示

### 📊 **服装提案の確認**
- 👕 **基本アイテム**: 気温に応じたメインの衣類
- 🧥 **アウター**: 必要に応じた上着類  
- 👟 **履物**: 天気・気温に適した靴
- 🎒 **アクセサリー・小物**: 傘、帽子、マフラーなど
- ⏰ **時間帯別提案**: 朝・昼・夜の詳細なアドバイス（気温・天気・降水確率を含む）
- ☔ **現在の降水確率**: メイン天気表示に現在時刻の降水確率を表示
- ☔ **時間帯別降水確率**: 各時間帯の降水確率と雨対策アドバイス
- 💡 **健康・安全アドバイス**: 熱中症対策、防寒対策など

### 🔄 **トップページに戻る**
- **タイトルをクリック**: アプリタイトル部分をクリック（天気表示時のみ）
- **「トップページに戻る」ボタン**: 画面下部のボタンをクリック

## 🔒 セキュリティ

- **環境変数管理**: `.env.local`でAPIキーを安全に管理
- **gitignore設定**: 機密情報の誤コミットを防止
- **テンプレートファイル**: `.env.example`で設定例を提供

## ✅ 最新アップデート情報

### **v3.1の新機能（最新）**
- ✅ **現在天気の降水確率**: メイン天気表示に現在時刻の降水確率を追加表示
- ✅ **統合降水確率システム**: 現在地・都市検索問わず、予報データから自動で降水確率を取得・統合
- ✅ **エラー耐性向上**: 予報データ取得失敗時でも現在天気は正常表示

### **v3.0の機能**
- ✅ **県名・市区町村検索**: 「埼玉県」「杉並区」「川崎市」など日本語地名検索対応
- ✅ **地名自動変換**: 検索結果を「東京都杉並区」「埼玉県○○市」形式で表示
- ✅ **Atomic Design導入**: コンポーネント設計をAtoms/Molecules/Organisms/Templates構造に整理
- ✅ **時間帯別レイアウト最適化**: 朝昼夜を1画面でスクロール不要表示
- ✅ **時間帯別降水確率**: 各時間帯の降水確率（☔ XX%）と雨対策アドバイス
- ✅ **検索パターン強化**: 200+都市の包括的な検索パターンで成功率向上

### **v2.0の機能**
- ✅ **都市名検索機能**: 位置情報が使えない場合の代替手段
- ✅ **時間帯別提案**: 朝・昼・夜の詳細な服装アドバイス
- ✅ **エラーハンドリング強化**: 位置情報エラーの詳細な対処方法を表示
- ✅ **トップページ復帰機能**: タイトルクリックまたはボタンでホームに戻る
- ✅ **レスポンシブ改善**: モバイル・デスクトップ両対応のUI向上

## 🎯 今後の拡張予定

### **短期目標**
- [ ] 週間天気予報による服装提案
- [ ] 全国47都道府県の主要都市検索対応拡大
- [ ] ユーザー設定（性別・年齢・体質）
- [ ] 服装画像の表示機能
- [ ] お気に入り都市の保存機能（LocalStorage）

### **中期目標**
- [ ] PWA対応（オフライン利用）
- [ ] 多言語対応
- [ ] カスタマイズ可能な提案ロジック
- [ ] 通知機能（天気変化アラート）

### **長期目標**
- [ ] AI学習による個人最適化
- [ ] ソーシャル機能（服装シェア）
- [ ] ウェアラブルデバイス連携

## 📄 ライセンス

MIT License

## 🤝 コントリビューション

プルリクエストや Issue の報告を歓迎します。

## 📞 サポート

問題が発生した場合は、GitHub Issues でお知らせください。
